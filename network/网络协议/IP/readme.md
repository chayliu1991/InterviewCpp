# IP 基本认识  

⽹络层的主要作⽤是： 实现主机与主机之间的通信，也叫点对点（end to end）通信。  

⽹络层与数据链路层的关系：MAC （数据链路层）的作⽤则是实现直连的两个设备之间通信，⽽ IP（⽹络层） 则负责在没有直连的两个⽹络之间进⾏通信传输。  

![](./img/mac_ip.png)

# IP 地址  

## IPv4

### IPv4 的表示

IP 地址（IPv4 地址）由 32 位正整数来表示， IP 地址在计算机是以⼆进制的⽅式处理的。为了⽅便记忆采⽤了点分⼗进制的标记⽅式：

![](./img/ipv4_expression.png)

IP 地址最⼤值也就是：2^32 ≈ 43 亿

### IPv4 的分类

IP 地址分类成了 5 种类型，分别是 A 类、 B 类、 C 类、 D 类、 E 类：

![](./img/ipv4_classification.png)

![](./img/ipv4_classification2.png)

#### A、B、C 类地址  

A、 B、 C 类主要分为两个部分，分别是⽹络号和主机号：

![](./img/ipv4_abc.png)

最⼤主机个数，就是要看主机号的位数，如 C 类地址的主机号占 8 位，那么 C 类地址的最⼤主机个数：2 ^ 8 -2 = 254。

在 IP 地址中，有两个 IP 是特殊的，分别是主机号全为 1 和 全为 0 地址，在分配过程中，应该去掉这两种情况  ：

- 主机号全为 1 指定某个⽹络下的所有主机，⽤于⼴播  
- 主机号全为 0 指定某个⽹络  

![](./img/ipv4_special.png)

#### ⼴播地址的作用

⼴播地址⽤于在同⼀个链路中相互连接的主机之间发送数据包。  

⼴播地址可以分为本地⼴播和直接⼴播两种：

- 在本⽹络内⼴播的叫做本地⼴播
- 在不同⽹络之间的⼴播叫做直接⼴播

⽹络地址为 192.168.0.0/24 的情况下，⼴播地址是 192.168.0.255 。因为这个⼴播地址的 IP 包会被路由器屏蔽，所以不会到达 192.168.0.0/24 以外的其他链路上  

![](./img/local_broadcast.png)

⽹络地址为 192.168.0.0/24 的主机向 192.168.1.255/24 的⽬标地址发送 IP 包。收到这个包的路由器，将数据转发给 192.168.1.0/24，从⽽使得所有192.168.1.1~192.168.1.254 的主机都能收到这个包（由于直接⼴播有⼀定的安全问题，多数情况下会在路由器上设置为不转发。） 

![](./img/direct_broascast.png)

#### D、 E 类地址  





