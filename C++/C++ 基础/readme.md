# 变量和内置类型

## 基本内置类型



### 内置类型使用建议

- 明确值不可能为负数时用 `unsigned` 类型
- 在算数运算中使用 `int` 。`short`  的运算速度和容量都不及 `int`，而 `long` 在 32 位机器与 `int` 大小一致。如果值超出 `int` 的最小保证范围，使用 `long long `
- 在算数表达式中不要使用 `char` 和 `bool` 类型。如果需要使用一个不大的整数，应该明确指定它的类型是 `signed char ` 还是 `unsigned char`，因为 `char` 的具体形式由编译器决定
- 将 `double` 用于浮点运算， `float` 通常精度不够而且 `double` 的运算时间可能还优于 `float` ，`long double` 除非在特殊场景下几乎不会使用到

### 类型转换

- 把非布尔类型的算术值赋给布尔类型时，初始值为0则结果为 `false`，否则结果为 `true`；把布尔值赋给非布尔类型时，初始值为 `false` 则结果为0，初始值为 `true` 则结果为1
- 把浮点数赋给整数类型时，进行近似处理，结果值仅保留浮点数中的整数部分；把整数值赋给浮点类型时，小数部分记为0。如果该整数所占的空间超过了浮点类型的容量，精度可能有损失
- 赋给带符号类型一个超出它表示范围的值时，结果是未定义的，程序可能继续工作、可能崩溃，也可能生成垃圾数据
- 赋给无符号类型一个超出它表示范围的值时
  - 如果初始值是正数，结果就是：对无符号类型表示数值总数取模后的余数
  - 如果初始值是负数，结果就是：初始值 + 无符号类型表示数据范围 * N 得到的一个正数

```
unsigned char ch1 = 256; //@ ch1 = 256 % 256 = 0
unsigned char ch2 = -1; //@ ch2 = -1 + 256 * 1= 255
unsigned char ch3 = -1000; //@ ch3 = -1000 + 256 * 4= 24;

signed char ch4 = -129;	//@ 未定义的
signed char ch5 = 130;	//@ 未定义的
```

算术转换：

所有算术运算符都有可能引起类型转换，结果是将操作数转为一个相同的类型，同时也是结果的类型，这种行为称为算术转换，其规则就是以最宽的数据类型为标准：

- 如果任何一个操作数是 `long double` 时，其它的操作数转为 `long double`
- 否则，如果一个操作数是 `double` 时，其它的操作数转为 `double`
- 否则，如果一个操作数是 `float` 时，其它操作数转为 `float`
- 否则，先执行整型提升，如果一个操作数是 `unsigned long int` 时，其它的类型转为 `unsigned long int`
- 否则，如果一个操作数是 `long int` 而另一个是 `unsigned int` 时，结果取决于 `long int` 是否能够表示 `unsigned int` 的所有值，如果可以则` unsigned int` 转为 `long int`，否则两者都转为 `unsigned long int`
- 否则，如果一个操作数是 `long int`，其它的操作数转为 `long int`
- 否则，操作数都是 `int` 类型

避免混用有符号类型和无符号类型执行算术运算：当有无符号值参与运算时，通常结果就是无符号值，此时即便在我们的直觉中值应该是负数，数值会被解释为一个很大的无符号值：

```
unsigned u1 = 42, u2 = 10;
std::cout << u1 - u2 << std::endl; //@ 32
std::cout << u2 - u1 << std::endl; //@ 4294967264
```

## 字面值常量

字面量用来描述数字、字符和字符串的值，字面量是常量。每个字面量都有类型，字面量的形式和值决定了其类型。

### 整型字面值常量

以`0`开头的整数代表八进制数，以 `0x` 或 `0X` 开头的整数代表十六进制数。在 C++14中，`0b` 或 `0B` 开头的整数代表二进制数。

- 十进制是有符号的，从 `int`, `long` 或 ` long long` 中选择最小可容纳数值的类型，没有 `short` 类型的字面量
- 八进制和十六进制可以是无符号或者有符号的，从 `int`, `unsigned`, `long`, `unsigned long`, `long long` 或 `unsigned long long` 中查找适合的类型

添加特定的后缀或者后缀组合可以改变整型字面值的默认类型：

- U 或 u：无符号类型
- L 或 l：`long` 类型
- LL或 ll：`long long` 类型

### 浮点型字面值常量

浮点型字面值默认是一个 `double`。添加特定的后缀或者后缀组合可以改变浮点型字面值的默认类型：

- f 或 F：`float` 类型
- l 或 L：`long double`  类型

### 字符型字面值

字符写做单引号中的单个字符如：`'x'`，值是字符在机器字符集中的数字表示值。

C++ 和 C 中定义了几个可以的字符，这些字符通常是不可打印或者在字符串中有特殊含义：



泛化转义序列的形式是 `\x` 后紧跟1个或多个十六进制数字，或者 `\` 后紧跟1个、2个或3个八进制数字，其中数字部分表示字符对应的数值。如果 `\` 后面跟着的八进制数字超过3个，则只有前3个数字与 `\` 构成转义序列。相反，`\x `要用到后面跟着的所有数字。

添加特定的前缀指定字符型字面值的类型：

- u：Unicode 16  character，char16_t
- U：Unicode 32character，char32_t
- L：wide charater，wchar_t

